{"version":3,"sources":["comp/Button.js","comp/AdminPanel.js","comp/AdminLogin.js","comp/PlayerAndChat.js","App.js","index.js"],"names":["useStyles","makeStyles","theme","root","margin","spacing","borderColor","color","transition","OutlinedButtons","text","onClick","classes","className","Button","variant","AdminPanel","useContext","DataContext","admin","setAdmin","setCurrentVideoLink","socket","setTwitchStreamerChat","useState","editVideoLink","setEditVideoLink","type","value","onChange","e","target","style","display","preventDefault","ReactPlayer","canPlay","newStreamerChat","prompt","emit","window","confirm","prev","AdminLogin","history","password","setPassword","setIsAlert","on","success","message","push","alert","setTimeout","position","top","left","transform","PlayerAndChat","currentVideoLink","onlineUsers","twitchStreamerChat","isPlaying","setIsPlaying","player","useRef","useEffect","interval","setInterval","currentSeconds","current","getCurrentTime","currentChat","clearInterval","console","log","currentVideoLinkServer","isPlayingServer","twitchStreamerChatServer","currentTime","seekTo","time","ref","onPlay","onPause","playing","url","width","height","controls","volume","border","title","id","src","React","createContext","io","App","useHistory","videoQueue","setVideoQueue","setOnlineUsers","fetch","then","res","json","document","undefined","videoQueueServer","Provider","path","exact","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.405a0791.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \"& > *\": {\r\n      margin: theme.spacing(1),\r\n      borderColor: \"white\",\r\n      color: \"white\",\r\n      transition: \"0.3s\",\r\n      \"&:hover\": {\r\n        color: \"red\",\r\n        borderColor: \"red\",\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function OutlinedButtons({ text, onClick }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Button onClick={onClick && onClick} variant=\"outlined\">\r\n        {text ? text : \"Enter text\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { useState } from \"react\";\r\nimport ReactPlayer from \"react-player/lazy\";\r\nimport Button from \"./Button\";\r\nimport { DataContext } from \"../App\";\r\nimport \"./AdminPanel.css\";\r\nconst AdminPanel = () => {\r\n  const {\r\n    admin,\r\n    setAdmin,\r\n    setCurrentVideoLink,\r\n    socket,\r\n    setTwitchStreamerChat,\r\n  } = useContext(DataContext);\r\n  const [editVideoLink, setEditVideoLink] = useState();\r\n\r\n  const handleAddVideo = () => {\r\n    if (ReactPlayer.canPlay(editVideoLink)) {\r\n      setCurrentVideoLink(editVideoLink);\r\n    }\r\n    setEditVideoLink(\"\");\r\n  };\r\n\r\n  const handleLeaveAdmin = () => {\r\n    const confirmAnswer = window.confirm(\r\n      \"Are you sure you don't want to be admin?\"\r\n    );\r\n    if (confirmAnswer) {\r\n      setAdmin((prev) => !prev);\r\n      socket.emit(\"adminLeave\");\r\n    }\r\n  };\r\n\r\n  const handleChangeStreamersChat = () => {\r\n    const newStreamerChat = prompt(\"Insert new twitch user:\");\r\n    if (newStreamerChat) {\r\n      setTwitchStreamerChat(newStreamerChat);\r\n      socket.emit(\"changeStreamersChat\", newStreamerChat);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <br />\r\n      {admin && (\r\n        // ADDING VIDEO PANEL\r\n\r\n        <form>\r\n          <input\r\n            type=\"text\"\r\n            value={editVideoLink}\r\n            onChange={(e) => {\r\n              if (admin) {\r\n                setEditVideoLink(e.target.value);\r\n              }\r\n            }}\r\n          />\r\n\r\n          <button\r\n            style={{ display: \"none\" }}\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              handleAddVideo();\r\n            }}\r\n            type=\"submit\"\r\n          ></button>\r\n        </form>\r\n      )}\r\n      <div className=\"adminButtonsDiv\">\r\n        <Button\r\n          text={\"CHANGE STREAMER'S CHAT\"}\r\n          onClick={handleChangeStreamersChat}\r\n        />\r\n        <Button text={\"LEAVE ADMIN\"} onClick={handleLeaveAdmin} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n","import React, { useState } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { DataContext } from \"../App\";\r\nconst AdminLogin = () => {\r\n  const { socket, admin, setAdmin, history } = useContext(DataContext);\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isAlert, setIsAlert] = useState(0);\r\n  const handleLogin = () => {\r\n    socket.emit(\"handleLogin\", { password });\r\n  };\r\n\r\n  socket.on(\"handleLoginAnswer\", ({ success, message }) => {\r\n    if (success) {\r\n      if (!admin) {\r\n        setAdmin(true);\r\n      }\r\n      history.push(\"/\");\r\n    } else {\r\n      setIsAlert((prev) => {\r\n        prev++;\r\n        if (prev === 1) {\r\n          alert(message);\r\n        }\r\n        setTimeout(() => {\r\n          setIsAlert(0);\r\n        }, 100);\r\n      });\r\n    }\r\n  });\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        transform: \"translate(-50%,-50%)\",\r\n      }}\r\n    >\r\n      <form>\r\n        <input\r\n          type=\"text\"\r\n          value={password}\r\n          onChange={(e) => {\r\n            setPassword(e.target.value);\r\n          }}\r\n        />\r\n        <button\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            handleLogin();\r\n          }}\r\n          type=\"submit\"\r\n          style={{ display: \"none\" }}\r\n        ></button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminLogin;\r\n","import React, { useContext } from \"react\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport ReactPlayer from \"react-player/lazy\";\r\nimport { DataContext } from \"../App\";\r\nimport \"./PlayerAndChat.css\";\r\n\r\nconst PlayerAndChat = () => {\r\n  const {\r\n    admin,\r\n    setCurrentVideoLink,\r\n    currentVideoLink,\r\n    socket,\r\n    onlineUsers,\r\n    twitchStreamerChat,\r\n    setTwitchStreamerChat,\r\n  } = useContext(DataContext);\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  const player = useRef();\r\n  const maxDelay = 2;\r\n  const websiteURL = \"victorowsky.github.io\"; // FOR TWITCH CHAT\r\n  // const websiteURL = \"localhost\"; // FOR TWITCH CHAT\r\n\r\n  // ADMIN EMITS HIS DATA TO SHARE WITH OTHERS\r\n  useEffect(() => {\r\n    let interval;\r\n    if (admin) {\r\n      interval = setInterval(() => {\r\n        socket.emit(\"adminData\", {\r\n          currentSeconds: player.current.getCurrentTime(),\r\n          currentChat: twitchStreamerChat,\r\n        });\r\n      }, 3000);\r\n    }\r\n    return () => {\r\n      clearInterval(interval);\r\n      console.log(\"cleared interval\");\r\n    };\r\n  }, [admin, socket]);\r\n\r\n  // CHANGE VIDEO IF\r\n  useEffect(() => {\r\n    if (admin) {\r\n      socket.emit(\"videoChange\", currentVideoLink);\r\n    }\r\n  }, [currentVideoLink, admin, socket]);\r\n\r\n  useEffect(() => {\r\n    if (!currentVideoLink) {\r\n      socket.emit(\"getAllData\");\r\n    }\r\n  }, [socket, currentVideoLink]);\r\n\r\n  socket.on(\r\n    \"getAllDataAnswer\",\r\n    ({ currentVideoLinkServer, isPlayingServer, twitchStreamerChatServer }) => {\r\n      setCurrentVideoLink(currentVideoLinkServer);\r\n      setIsPlaying(isPlayingServer);\r\n      setTwitchStreamerChat(twitchStreamerChatServer);\r\n    }\r\n  );\r\n\r\n  socket.on(\"adminDataAnswer\", ({ currentSeconds }) => {\r\n    if (player.current) {\r\n      const currentTime = player.current.getCurrentTime();\r\n      if (\r\n        !(\r\n          currentTime < currentSeconds + maxDelay &&\r\n          currentTime > currentSeconds - maxDelay\r\n        )\r\n      ) {\r\n        player.current.seekTo(currentSeconds, \"seconds\");\r\n      }\r\n    }\r\n  });\r\n\r\n  socket.on(\"changeStreamersChatAnswer\", (twitchStreamerChatServer) => {\r\n    if (!admin) {\r\n      setTwitchStreamerChat(twitchStreamerChatServer);\r\n    }\r\n  });\r\n\r\n  socket.on(\"videoChangeAnswer\", (currentVideoLink) => {\r\n    // TURNED OFF FOR ADMIN TO NOT LOOP PAGE\r\n    if (!admin) {\r\n      setCurrentVideoLink(currentVideoLink);\r\n    }\r\n  });\r\n\r\n  const startSendingTimeToSocket = () => {\r\n    if (admin) {\r\n      setIsPlaying(true);\r\n      socket.emit(\"isPlaying\", { isPlaying: true });\r\n    }\r\n  };\r\n\r\n  const stopSendingTimeToSocket = () => {\r\n    if (admin) {\r\n      setIsPlaying(false);\r\n      socket.emit(\"isPlaying\", { isPlaying: false });\r\n    }\r\n  };\r\n\r\n  socket.on(\"isPlayingSocketAnswer\", (isPlaying) => {\r\n    setIsPlaying(isPlaying);\r\n  });\r\n\r\n  socket.on(\"currentSeconds\", ({ time }) => {\r\n    if (player.current) {\r\n      player.current.seekTo(time, \"seconds\");\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className=\"videoAndChat\">\r\n      <div className=\"playerAndChat\">\r\n        <div className=\"player-wrapper\">\r\n          <ReactPlayer\r\n            ref={player}\r\n            onPlay={startSendingTimeToSocket}\r\n            onPause={stopSendingTimeToSocket}\r\n            playing={isPlaying}\r\n            className=\"react-player\"\r\n            url={currentVideoLink}\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            controls={true}\r\n            volume={0.1}\r\n          />\r\n        </div>\r\n        <div className=\"twitchChat\">\r\n          <span className=\"onlineUsers\">\r\n            {onlineUsers ? `${onlineUsers} ONLINE` : \"CONNECTING\"}\r\n          </span>\r\n          <iframe\r\n            style={{ border: \"2px solid #121212\" }}\r\n            title=\"TwitchChat\"\r\n            id=\"chat_embed\"\r\n            src={`https://www.twitch.tv/embed/${twitchStreamerChat}/chat?darkpopout&parent=${websiteURL}`}\r\n            height=\"100%\"\r\n            width=\"100%\"\r\n          ></iframe>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayerAndChat;\r\n","import React, { useState, useEffect } from \"react\";\nimport { Switch, Route, useHistory } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport \"./App.css\";\nimport AdminPanel from \"./comp/AdminPanel\";\nimport AdminLogin from \"./comp/AdminLogin\";\nimport PlayerAndChat from \"./comp/PlayerAndChat\";\n\nexport const DataContext = React.createContext();\n\n// const socket = io(`http://localhost:3001/`);\nconst serverURL = \"https://boiling-bastion-80662.herokuapp.com/\";\nconst socket = io(serverURL);\nconst App = () => {\n  const history = useHistory();\n  const [admin, setAdmin] = useState(false);\n  const [currentVideoLink, setCurrentVideoLink] = useState(\"\");\n  const [videoQueue, setVideoQueue] = useState([]);\n  const [onlineUsers, setOnlineUsers] = useState(null);\n  const [twitchStreamerChat, setTwitchStreamerChat] = useState(\"demonzz1\");\n\n  useEffect(() => {\n    fetch(`https://noembed.com/embed?url=${currentVideoLink}`)\n      .then((res) => res.json())\n      .then((res) => {\n        document.title = res.title;\n        if (res.title === undefined) {\n          document.title = \"Watch Together\";\n        }\n      });\n  }, [currentVideoLink]);\n\n  socket.on(\"onlineUsers\", (onlineUsers) => {\n    setOnlineUsers(onlineUsers);\n  });\n\n  socket.on(\"videoQueueAnswer\", ({ videoQueueServer }) => {\n    setVideoQueue(videoQueueServer);\n  });\n  return (\n    <>\n      <DataContext.Provider\n        value={{\n          admin,\n          setAdmin,\n          socket,\n          currentVideoLink,\n          setCurrentVideoLink,\n          videoQueue,\n          setVideoQueue,\n          history,\n          onlineUsers,\n          twitchStreamerChat,\n          setTwitchStreamerChat,\n        }}\n      >\n        <div className=\"app\">\n          <Switch>\n            <Route path=\"/\" exact>\n              <PlayerAndChat />\n\n              <div className=\"bottomDiv\">\n                {admin && <AdminPanel />}\n                {/* <Queue /> */}\n              </div>\n            </Route>\n            <Route path=\"/admin\">\n              <AdminLogin />\n            </Route>\n          </Switch>\n        </div>\n      </DataContext.Provider>\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { HashRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}