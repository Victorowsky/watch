(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{120:function(e,t,n){},124:function(e,t,n){},130:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),i=(n(89),n(11)),s=n(5),l=n(74),u=n.n(l),m=(n(120),n(163)),d=n(165),f=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),borderColor:"white",color:"white",transition:"0.3s","&:hover":{color:"red",borderColor:"red"}}}}}));function v(e){var t=e.text,n=e.onClick,a=e.style,c=f();return r.a.createElement("div",{className:c.root},r.a.createElement(d.a,{onClick:n&&n,style:a&&a,variant:"outlined"},t||"Enter text"))}n(124);var E=function(){var e=Object(a.useContext)(S),t=e.admin,n=e.setAdmin,c=e.setCurrentVideoLink,o=e.socket,s=Object(a.useState)(),l=Object(i.a)(s,2),u=l[0],m=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),t&&r.a.createElement("form",null,r.a.createElement("input",{type:"text",value:u,placeholder:"VIDEO URL",onChange:function(e){t&&m(e.target.value)}}),r.a.createElement("button",{style:{display:"none"},onClick:function(e){e.preventDefault(),c(u),m("")},type:"submit"})),r.a.createElement("div",{className:"adminButtonsDiv"},r.a.createElement(v,{text:"LEAVE ADMIN",onClick:function(){window.confirm("Are you sure you don't want to be an admin?")&&(n(!1),o.emit("adminLeave"))}})))},b=n(75),p=n.n(b),O=(n(130),function(){var e=Object(s.g)(),t=Object(s.h)().twitchStreamer;void 0===t&&(t="victorowsky_");var n=Object(a.useState)(null),c=Object(i.a)(n,2),o=c[0],l=c[1],u=Object(a.useState)(t),m=Object(i.a)(u,2),d=m[0],f=m[1],E=Object(a.useContext)(S),b=E.admin,O=E.setCurrentVideoLink,g=E.currentVideoLink,h=E.socket,j=E.setAdmin,w=E.setIsSuccess,y=E.setIsError,C=E.setErrorMessage,k=E.setSuccessMessage,A=Object(a.useState)(!1),N=Object(i.a)(A,2),L=N[0],R=N[1],x=Object(a.useRef)(),D=Object(a.useState)(2),I=Object(i.a)(D,2),M=I[0],T=I[1],P=Object(a.useState)(!0),V=Object(i.a)(P,2),U=V[0],F=V[1];Object(a.useEffect)((function(){var e;return b&&(e=setInterval((function(){h.emit("adminData",{currentRoom:d,currentSeconds:x.current.getCurrentTime()})}),3e3)),function(){clearInterval(e)}}),[b,h,d]),Object(a.useEffect)((function(){b&&h.emit("videoChange",{currentVideoLink:g,currentRoom:d})}),[g,h]),Object(a.useEffect)((function(){window.addEventListener("beforeunload",(function(e){e.preventDefault(),h.emit("leaveRoom",{currentRoom:d}),h.emit("adminLeave")})),f(t)}),[e.pathname]),Object(a.useEffect)((function(){return h.emit("joinRoom",{currentRoom:d}),function(){h.emit("leaveRoom",{currentRoom:d}),j(!1),h.emit("adminLeave")}}),[d]),Object(a.useEffect)((function(){if(h.on("onlineUsersAnswer",(function(e){var t=e.onlineUsers;l(t)})),!b)return h.on("videoChangeAnswer",(function(e){var t=e.currentVideoLink;O(t)})),h.on("isPlayingSocketAnswer",(function(e){var t=e.isPlaying;e.currentRoom;R(t)})),h.on("joinRoomAnswer",(function(e){var t=e.docs;O(t.currentVideoLink),l(t.onlineUsers),console.log(t.admin),t.admin?F(!0):F(!1)})),h.on("adminAnswer",(function(e){var t=e.isAdminTaken;F(t)})),h.on("adminDataAnswer",(function(e){var t=e.currentSeconds;if(x.current){var n=x.current.getDuration(),a=x.current.getCurrentTime();n>t?a-M<t&&a+M>t||x.current.seekTo(t,"seconds"):a<n+6&&a>n-6||x.current.seekTo(n,"seconds")}})),function(){h.removeAllListeners("adminDataAnswer"),h.removeAllListeners("joinRoomAnswer"),h.removeAllListeners("isPlayingSocketAnswer"),h.removeAllListeners("videoChangeAnswer"),h.removeAllListeners("adminAnswer")}}),[d,b,h,M]);h.on("adminRequestAnswer",(function(e){var t=e.success,n=e.message;t?(w(!0),k(n),j(!0)):(y(!0),C(n))}));var q=function(e){"increment"===e?T((function(e){return e+1})):"decrement"===e&&T((function(e){return e>2?e+-1:e}))};return r.a.createElement("div",{className:"videoAndChat"},r.a.createElement("div",{className:"playerAndChat"},r.a.createElement("div",{className:"player-wrapper"},r.a.createElement(p.a,{ref:x,onPlay:function(){b&&(R(!0),h.emit("isPlaying",{isPlaying:!0,currentRoom:d}))},onPause:function(){b&&(R(!1),h.emit("isPlaying",{isPlaying:!1,currentRoom:d}))},playing:L,className:"react-player",url:g,width:"100%",height:"100%",controls:!0,volume:.1})),r.a.createElement("div",{className:"twitchChat"},r.a.createElement("span",{className:"onlineUsers"},null!==o?"".concat(o," ONLINE"):"CONNECTING"),r.a.createElement("iframe",{style:{border:"2px solid #121212"},title:"TwitchChat",id:"chat_embed",src:"https://www.twitch.tv/embed/".concat(t,"/chat?darkpopout&parent=").concat("victorowsky.github.io"),height:"100%",width:"100%"}),!b&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"delayInfo"},"Max Delay: ",M," seconds"),r.a.createElement("div",{className:"delayManage"},r.a.createElement("div",{className:"delayManageOption",onClick:function(){return q("increment")}},"+"),r.a.createElement("div",{className:"delayManageOption",onClick:function(){return q("decrement")}},"-")),!U&&r.a.createElement(v,{text:"GET ADMIN",onClick:function(){h.emit("adminRequest",{currentRoom:t})},style:{borderColor:"white",color:"white"}})))))}),g=n(167),h=n(168);function j(e){return r.a.createElement(h.a,Object.assign({elevation:6,variant:"filled"},e))}var w=Object(m.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function y(){var e=Object(a.useContext)(S),t=e.isSuccess,n=e.setIsSuccess,c=e.successMessage,o=w(),i=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement("div",{className:o.root},r.a.createElement(g.a,{open:t,autoHideDuration:1e3,onClose:i},r.a.createElement(j,{onClose:i,severity:"success"},c)))}function C(e){return r.a.createElement(h.a,Object.assign({elevation:6,variant:"filled"},e))}var k=Object(m.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function A(){var e=Object(a.useContext)(S),t=e.isError,n=e.setIsError,c=e.errorMessage,o=k(),i=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement("div",{className:o.root},r.a.createElement(g.a,{open:t,autoHideDuration:1e3,onClose:i},r.a.createElement(C,{onClose:i,severity:"error"},c)))}var S=r.a.createContext(),N=u()("https://boiling-bastion-80662.herokuapp.com/"),L=function(){var e=Object(s.f)(),t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(""),u=Object(i.a)(l,2),m=u[0],d=u[1],f=Object(a.useState)(!1),v=Object(i.a)(f,2),b=v[0],p=v[1],g=Object(a.useState)(!1),h=Object(i.a)(g,2),j=h[0],w=h[1],C=Object(a.useState)(""),k=Object(i.a)(C,2),L=k[0],R=k[1],x=Object(a.useState)(""),D=Object(i.a)(x,2),I=D[0],M=D[1];return Object(a.useEffect)((function(){fetch("https://noembed.com/embed?url=".concat(m)).then((function(e){return e.json()})).then((function(e){document.title=e.title,void 0===e.title&&(document.title="Watch Together")}))}),[m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(S.Provider,{value:{admin:c,setAdmin:o,socket:N,currentVideoLink:m,setCurrentVideoLink:d,history:e,isSuccess:b,setIsSuccess:p,isError:j,setIsError:w,successMessage:L,setSuccessMessage:R,errorMessage:I,setErrorMessage:M}},r.a.createElement("div",{className:"app"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0},r.a.createElement(O,null),r.a.createElement("div",{className:"bottomDiv"},c&&r.a.createElement(E,null))),r.a.createElement(s.a,{path:"/:twitchStreamer",exact:!0},r.a.createElement(O,null),r.a.createElement("div",{className:"bottomDiv"},c&&r.a.createElement(E,null)))),r.a.createElement(y,null),r.a.createElement(A,null))))},R=n(39);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R.a,null,r.a.createElement(L,null))),document.getElementById("root"))},84:function(e,t,n){e.exports=n(132)},89:function(e,t,n){}},[[84,13,14]]]);
//# sourceMappingURL=main.0ed52833.chunk.js.map