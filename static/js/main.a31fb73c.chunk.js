(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{120:function(e,t,n){},124:function(e,t,n){},130:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),i=(n(89),n(14)),s=n(5),u=n(74),l=n.n(u),m=(n(120),n(163)),d=n(165),f=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),borderColor:"white",color:"white",transition:"0.3s","&:hover":{color:"red",borderColor:"red"}}}}}));function v(e){var t=e.text,n=e.onClick,a=e.style,c=f();return r.a.createElement("div",{className:c.root},r.a.createElement(d.a,{onClick:n&&n,style:a&&a,variant:"outlined"},t||"Enter text"))}n(124);var E=function(){var e=Object(a.useContext)(N),t=e.admin,n=e.setAdmin,c=e.setCurrentVideoLink,o=e.socket,s=Object(a.useState)(),u=Object(i.a)(s,2),l=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),t&&r.a.createElement("form",null,r.a.createElement("input",{type:"text",value:l,placeholder:"VIDEO URL",onChange:function(e){t&&m(e.target.value)}}),r.a.createElement("button",{style:{display:"none"},onClick:function(e){e.preventDefault(),c(l),m("")},type:"submit"})),r.a.createElement("div",{className:"adminButtonsDiv"},r.a.createElement(v,{text:"LEAVE ADMIN",onClick:function(){window.confirm("Are you sure you don't want to be an admin?")&&(n(!1),o.emit("adminLeave"))}})))},b=n(75),h=n.n(b),p=(n(130),function(){var e=Object(s.g)(),t=Object(s.h)().twitchStreamer;void 0===t&&(t="victorowsky_");var n=Object(a.useState)(null),c=Object(i.a)(n,2),o=c[0],u=c[1],l=Object(a.useState)(t),m=Object(i.a)(l,2),d=m[0],f=m[1],E=Object(a.useContext)(N),b=E.admin,p=E.setCurrentVideoLink,j=E.currentVideoLink,O=E.socket,g=E.setAdmin,w=E.setIsSuccess,C=E.setIsError,y=E.setErrorMessage,k=E.setSuccessMessage,S=Object(a.useState)(!1),R=Object(i.a)(S,2),A=R[0],L=R[1],x=Object(a.useRef)();Object(a.useEffect)((function(){var e;return b&&(e=setInterval((function(){O.emit("adminData",{currentRoom:d,currentSeconds:x.current.getCurrentTime()})}),3e3)),function(){clearInterval(e)}}),[b,O,d]),Object(a.useEffect)((function(){b&&O.emit("videoChange",{currentVideoLink:j,currentRoom:d})}),[j,O]),Object(a.useEffect)((function(){window.addEventListener("beforeunload",(function(e){e.preventDefault(),O.emit("leaveRoom",{currentRoom:d}),O.emit("adminLeave")})),f(t)}),[e.pathname]),Object(a.useEffect)((function(){return O.emit("joinRoom",{currentRoom:d}),function(){O.emit("leaveRoom",{currentRoom:d}),g(!1),O.emit("adminLeave")}}),[d]),Object(a.useEffect)((function(){if(O.on("onlineUsersAnswer",(function(e){var t=e.onlineUsers;u(t)})),!b)return O.on("videoChangeAnswer",(function(e){var t=e.currentVideoLink;p(t)})),O.on("isPlayingSocketAnswer",(function(e){var t=e.isPlaying;e.currentRoom;L(t)})),O.on("joinRoomAnswer",(function(e){var t=e.docs;p(t.currentVideoLink),u(t.onlineUsers)})),O.on("adminDataAnswer",(function(e){var t=e.currentSeconds;if(x.current){var n=x.current.getDuration(),a=x.current.getCurrentTime();n>t?a<t+6&&a>t-6||x.current.seekTo(t,"seconds"):a<n+2-3&&a>n-2-3||x.current.seekTo(n-3,"seconds")}})),function(){O.offAny()}}),[d,b,O]);return O.on("adminRequestAnswer",(function(e){var t=e.success,n=e.message;t?(w(!0),k(n),g(!0)):(C(!0),y(n))})),r.a.createElement("div",{className:"videoAndChat"},r.a.createElement("div",{className:"playerAndChat"},r.a.createElement("div",{className:"player-wrapper"},r.a.createElement(h.a,{ref:x,onPlay:function(){b&&(L(!0),O.emit("isPlaying",{isPlaying:!0,currentRoom:d}))},onPause:function(){b&&(L(!1),O.emit("isPlaying",{isPlaying:!1,currentRoom:d}))},playing:A,className:"react-player",url:j,width:"100%",height:"100%",controls:!0,volume:.1})),r.a.createElement("div",{className:"twitchChat"},r.a.createElement("span",{className:"onlineUsers"},null!==o?"".concat(o," ONLINE"):"CONNECTING"),r.a.createElement("iframe",{style:{border:"2px solid #121212"},title:"TwitchChat",id:"chat_embed",src:"https://www.twitch.tv/embed/".concat(t,"/chat?darkpopout&parent=").concat("victorowsky.github.io"),height:"100%",width:"100%"}),!b&&r.a.createElement(v,{text:"GET ADMIN",onClick:function(){O.emit("adminRequest",{currentRoom:t})},style:{borderColor:"white",color:"white"}}))))}),j=n(167),O=n(168);function g(e){return r.a.createElement(O.a,Object.assign({elevation:6,variant:"filled"},e))}var w=Object(m.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function C(){var e=Object(a.useContext)(N),t=e.isSuccess,n=e.setIsSuccess,c=e.successMessage,o=w(),i=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement("div",{className:o.root},r.a.createElement(j.a,{open:t,autoHideDuration:3e3,onClose:i},r.a.createElement(g,{onClose:i,severity:"success"},c)))}function y(e){return r.a.createElement(O.a,Object.assign({elevation:6,variant:"filled"},e))}var k=Object(m.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function S(){var e=Object(a.useContext)(N),t=e.isError,n=e.setIsError,c=e.errorMessage,o=k(),i=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement("div",{className:o.root},r.a.createElement(j.a,{open:t,autoHideDuration:3e3,onClose:i},r.a.createElement(y,{onClose:i,severity:"error"},c)))}var N=r.a.createContext(),R=l()("https://boiling-bastion-80662.herokuapp.com/"),A=function(){var e=Object(s.f)(),t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),l=Object(i.a)(u,2),m=l[0],d=l[1],f=Object(a.useState)(!1),v=Object(i.a)(f,2),b=v[0],h=v[1],j=Object(a.useState)(!1),O=Object(i.a)(j,2),g=O[0],w=O[1],y=Object(a.useState)(""),k=Object(i.a)(y,2),A=k[0],L=k[1],x=Object(a.useState)(""),I=Object(i.a)(x,2),D=I[0],M=I[1];return Object(a.useEffect)((function(){fetch("https://noembed.com/embed?url=".concat(m)).then((function(e){return e.json()})).then((function(e){document.title=e.title,void 0===e.title&&(document.title="Watch Together")}))}),[m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(N.Provider,{value:{admin:c,setAdmin:o,socket:R,currentVideoLink:m,setCurrentVideoLink:d,history:e,isSuccess:b,setIsSuccess:h,isError:g,setIsError:w,successMessage:A,setSuccessMessage:L,errorMessage:D,setErrorMessage:M}},r.a.createElement("div",{className:"app"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0},r.a.createElement(p,null),r.a.createElement("div",{className:"bottomDiv"},c&&r.a.createElement(E,null))),r.a.createElement(s.a,{path:"/:twitchStreamer",exact:!0},r.a.createElement(p,null),r.a.createElement("div",{className:"bottomDiv"},c&&r.a.createElement(E,null)))),r.a.createElement(C,null),r.a.createElement(S,null))))},L=n(39);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L.a,null,r.a.createElement(A,null))),document.getElementById("root"))},84:function(e,t,n){e.exports=n(132)},89:function(e,t,n){}},[[84,13,14]]]);
//# sourceMappingURL=main.a31fb73c.chunk.js.map