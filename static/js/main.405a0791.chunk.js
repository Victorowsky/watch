(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{103:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},115:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),i=n.n(c),o=(n(72),n(7)),u=n(3),l=n(63),s=n.n(l),m=(n(103),n(29)),d=n.n(m),f=n(143),h=n(145),v=Object(f.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),borderColor:"white",color:"white",transition:"0.3s","&:hover":{color:"red",borderColor:"red"}}}}}));function b(e){var t=e.text,n=e.onClick,a=v();return r.a.createElement("div",{className:a.root},r.a.createElement(h.a,{onClick:n&&n,variant:"outlined"},t||"Enter text"))}n(112);var p=function(){var e=Object(a.useContext)(g),t=e.admin,n=e.setAdmin,c=e.setCurrentVideoLink,i=e.socket,u=e.setTwitchStreamerChat,l=Object(a.useState)(),s=Object(o.a)(l,2),m=s[0],f=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),t&&r.a.createElement("form",null,r.a.createElement("input",{type:"text",value:m,onChange:function(e){t&&f(e.target.value)}}),r.a.createElement("button",{style:{display:"none"},onClick:function(e){e.preventDefault(),d.a.canPlay(m)&&c(m),f("")},type:"submit"})),r.a.createElement("div",{className:"adminButtonsDiv"},r.a.createElement(b,{text:"CHANGE STREAMER'S CHAT",onClick:function(){var e=prompt("Insert new twitch user:");e&&(u(e),i.emit("changeStreamersChat",e))}}),r.a.createElement(b,{text:"LEAVE ADMIN",onClick:function(){window.confirm("Are you sure you don't want to be admin?")&&(n((function(e){return!e})),i.emit("adminLeave"))}})))},E=function(){var e=Object(a.useContext)(g),t=e.socket,n=e.admin,c=e.setAdmin,i=e.history,u=Object(a.useState)(""),l=Object(o.a)(u,2),s=l[0],m=l[1],d=Object(a.useState)(0),f=Object(o.a)(d,2),h=(f[0],f[1]);return t.on("handleLoginAnswer",(function(e){var t=e.success,a=e.message;t?(n||c(!0),i.push("/")):h((function(e){1===++e&&alert(a),setTimeout((function(){h(0)}),100)}))})),r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}},r.a.createElement("form",null,r.a.createElement("input",{type:"text",value:s,onChange:function(e){m(e.target.value)}}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),t.emit("handleLogin",{password:s})},type:"submit",style:{display:"none"}})))},C=(n(113),function(){var e=Object(a.useContext)(g),t=e.admin,n=e.setCurrentVideoLink,c=e.currentVideoLink,i=e.socket,u=e.onlineUsers,l=e.twitchStreamerChat,s=e.setTwitchStreamerChat,m=Object(a.useState)(!1),f=Object(o.a)(m,2),h=f[0],v=f[1],b=Object(a.useRef)();Object(a.useEffect)((function(){var e;return t&&(e=setInterval((function(){i.emit("adminData",{currentSeconds:b.current.getCurrentTime(),currentChat:l})}),3e3)),function(){clearInterval(e),console.log("cleared interval")}}),[t,i]),Object(a.useEffect)((function(){t&&i.emit("videoChange",c)}),[c,t,i]),Object(a.useEffect)((function(){c||i.emit("getAllData")}),[i,c]),i.on("getAllDataAnswer",(function(e){var t=e.currentVideoLinkServer,a=e.isPlayingServer,r=e.twitchStreamerChatServer;n(t),v(a),s(r)})),i.on("adminDataAnswer",(function(e){var t=e.currentSeconds;if(b.current){var n=b.current.getCurrentTime();n<t+2&&n>t-2||b.current.seekTo(t,"seconds")}})),i.on("changeStreamersChatAnswer",(function(e){t||s(e)})),i.on("videoChangeAnswer",(function(e){t||n(e)}));return i.on("isPlayingSocketAnswer",(function(e){v(e)})),i.on("currentSeconds",(function(e){var t=e.time;b.current&&b.current.seekTo(t,"seconds")})),r.a.createElement("div",{className:"videoAndChat"},r.a.createElement("div",{className:"playerAndChat"},r.a.createElement("div",{className:"player-wrapper"},r.a.createElement(d.a,{ref:b,onPlay:function(){t&&(v(!0),i.emit("isPlaying",{isPlaying:!0}))},onPause:function(){t&&(v(!1),i.emit("isPlaying",{isPlaying:!1}))},playing:h,className:"react-player",url:c,width:"100%",height:"100%",controls:!0,volume:.1})),r.a.createElement("div",{className:"twitchChat"},r.a.createElement("span",{className:"onlineUsers"},u?"".concat(u," ONLINE"):"CONNECTING"),r.a.createElement("iframe",{style:{border:"2px solid #121212"},title:"TwitchChat",id:"chat_embed",src:"https://www.twitch.tv/embed/".concat(l,"/chat?darkpopout&parent=").concat("victorowsky.github.io"),height:"100%",width:"100%"}))))}),g=r.a.createContext(),w=s()("https://boiling-bastion-80662.herokuapp.com/"),O=function(){var e=Object(u.f)(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)(""),s=Object(o.a)(l,2),m=s[0],d=s[1],f=Object(a.useState)([]),h=Object(o.a)(f,2),v=h[0],b=h[1],O=Object(a.useState)(null),j=Object(o.a)(O,2),y=j[0],S=j[1],k=Object(a.useState)("demonzz1"),A=Object(o.a)(k,2),N=A[0],x=A[1];return Object(a.useEffect)((function(){fetch("https://noembed.com/embed?url=".concat(m)).then((function(e){return e.json()})).then((function(e){document.title=e.title,void 0===e.title&&(document.title="Watch Together")}))}),[m]),w.on("onlineUsers",(function(e){S(e)})),w.on("videoQueueAnswer",(function(e){var t=e.videoQueueServer;b(t)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(g.Provider,{value:{admin:c,setAdmin:i,socket:w,currentVideoLink:m,setCurrentVideoLink:d,videoQueue:v,setVideoQueue:b,history:e,onlineUsers:y,twitchStreamerChat:N,setTwitchStreamerChat:x}},r.a.createElement("div",{className:"app"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0},r.a.createElement(C,null),r.a.createElement("div",{className:"bottomDiv"},c&&r.a.createElement(p,null))),r.a.createElement(u.a,{path:"/admin"},r.a.createElement(E,null))))))},j=n(40);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j.a,null,r.a.createElement(O,null))),document.getElementById("root"))},67:function(e,t,n){e.exports=n(115)},72:function(e,t,n){}},[[67,13,14]]]);
//# sourceMappingURL=main.405a0791.chunk.js.map