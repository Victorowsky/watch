{"version":3,"sources":["comp/AdminPanel.js","comp/AdminLogin.js","comp/PlayerAndChat.js","App.js","index.js"],"names":["AdminPanel","useContext","DataContext","admin","setAdmin","setCurrentVideoLink","setVideoQueue","useState","editVideoLink","setEditVideoLink","onClick","prev","style","backgroundColor","type","value","onChange","e","target","display","preventDefault","ReactPlayer","canPlay","AdminLogin","socket","history","password","setPassword","setIsAlert","on","success","message","push","alert","setTimeout","position","top","left","transform","emit","PlayerAndChat","currentVideoLink","onlineUsers","isPlaying","setIsPlaying","player","useRef","useEffect","setInterval","current","getCurrentTime","currentVideoLinkServer","isPlayingServer","videoQueueServer","seconds","currentTime","seekTo","time","className","ref","onPlay","onPause","onEnded","filter","array","includes","playing","url","width","height","controls","volume","border","title","id","src","React","createContext","io","App","useHistory","videoQueue","setOnlineUsers","Provider","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e95ccea4.chunk.js","sourcesContent":["import React, { useContext } from \"react\";\r\nimport { useState } from \"react\";\r\nimport ReactPlayer from \"react-player/lazy\";\r\nimport { DataContext } from \"../App\";\r\nconst AdminPanel = () => {\r\n  const { admin, setAdmin, setCurrentVideoLink, setVideoQueue } = useContext(\r\n    DataContext\r\n  );\r\n  const [editVideoLink, setEditVideoLink] = useState();\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={() => setAdmin((prev) => !prev)}\r\n        style={admin ? { backgroundColor: \"#06d6a0\" } : {}}\r\n      >\r\n        ADMIN\r\n      </button>\r\n      {admin && (\r\n        // ADDING VIDEO PANEL\r\n        <form>\r\n          <input\r\n            type=\"text\"\r\n            value={editVideoLink}\r\n            onChange={(e) => {\r\n              if (admin) {\r\n                setEditVideoLink(e.target.value);\r\n              }\r\n            }}\r\n          />\r\n          <button\r\n            style={{ display: \"none\" }}\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              if (ReactPlayer.canPlay(editVideoLink)) {\r\n                setCurrentVideoLink(editVideoLink);\r\n                setVideoQueue((prev) => [...prev, editVideoLink]);\r\n              }\r\n              setEditVideoLink(\"\");\r\n            }}\r\n            type=\"submit\"\r\n          ></button>\r\n        </form>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n","import React, { useState } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { DataContext } from \"../App\";\r\nconst AdminLogin = () => {\r\n  const { socket, admin, setAdmin, history } = useContext(DataContext);\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isAlert, setIsAlert] = useState(0);\r\n  const handleLogin = () => {\r\n    socket.emit(\"handleLogin\", { password });\r\n  };\r\n  socket.on(\"handleLoginAnswer\", ({ success, message }) => {\r\n    if (success) {\r\n      if (!admin) {\r\n        setAdmin(true);\r\n      }\r\n      history.push(\"/\");\r\n    } else {\r\n      setIsAlert((prev) => {\r\n        prev++;\r\n        if (prev === 1) {\r\n          alert(message);\r\n        }\r\n        setTimeout(() => {\r\n          setIsAlert(0);\r\n        }, 100);\r\n      });\r\n    }\r\n  });\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        transform: \"translate(-50%,-50%)\",\r\n      }}\r\n    >\r\n      <form>\r\n        <input\r\n          type=\"text\"\r\n          value={password}\r\n          onChange={(e) => {\r\n            setPassword(e.target.value);\r\n          }}\r\n        />\r\n        <button\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            handleLogin();\r\n          }}\r\n          type=\"submit\"\r\n          style={{ display: \"none\" }}\r\n        ></button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminLogin;\r\n","import React, { useContext } from \"react\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport ReactPlayer from \"react-player/lazy\";\r\nimport { DataContext } from \"../App\";\r\nimport \"./PlayerAndChat.css\";\r\n\r\nconst PlayerAndChat = () => {\r\n  const {\r\n    admin,\r\n    setCurrentVideoLink,\r\n    currentVideoLink,\r\n    socket,\r\n    setVideoQueue,\r\n    onlineUsers,\r\n  } = useContext(DataContext);\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  const player = useRef();\r\n  const maxDelay = 2;\r\n  const websiteURL = \"victorowsky.github.io\"; // FOR TWITCH CHAT\r\n  // const websiteURL = \"localhost\"; // FOR TWITCH CHAT\r\n  const streamer = \"demonzz1\";\r\n\r\n  useEffect(() => {\r\n    if (admin) {\r\n      setInterval(() => {\r\n        socket.emit(\"currentSeconds\", player.current.getCurrentTime());\r\n      }, 3000);\r\n    }\r\n  }, [admin]);\r\n\r\n  useEffect(() => {\r\n    if (admin) {\r\n      socket.emit(\"videoChange\", currentVideoLink);\r\n    }\r\n  }, [currentVideoLink]);\r\n\r\n  useEffect(() => {\r\n    if (!currentVideoLink) {\r\n      socket.emit(\"getAllData\");\r\n    }\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   socket.emit(\"videoQueue\", videoQueue);\r\n  // }, [socket]);\r\n\r\n  // socket.on(\"videoQueueAnswer\", ({ videoQueueServer }) => {\r\n  //   if (!videoQueue.includes(videoQueueServer)) {\r\n  //     setVideoQueue(videoQueueServer);\r\n  //   }\r\n  // });\r\n\r\n  socket.on(\r\n    \"getAllDataAnswer\",\r\n    ({ currentVideoLinkServer, isPlayingServer, videoQueueServer }) => {\r\n      setCurrentVideoLink(currentVideoLinkServer);\r\n      setIsPlaying(isPlayingServer);\r\n      setVideoQueue(videoQueueServer);\r\n    }\r\n  );\r\n\r\n  socket.on(\"currentSecondsAnswer\", (seconds) => {\r\n    if (player.current) {\r\n      const currentTime = player.current.getCurrentTime();\r\n      if (\r\n        !(currentTime < seconds + maxDelay && currentTime > seconds - maxDelay)\r\n      ) {\r\n        player.current.seekTo(seconds, \"seconds\");\r\n      }\r\n    }\r\n  });\r\n\r\n  socket.on(\"videoChangeAnswer\", (currentVideoLink) => {\r\n    if (!admin) {\r\n      setCurrentVideoLink(currentVideoLink);\r\n    }\r\n  });\r\n\r\n  const startSendingTimeToSocket = () => {\r\n    if (admin) {\r\n      setIsPlaying(true);\r\n      socket.emit(\"isPlaying\", { isPlaying: true });\r\n    }\r\n  };\r\n\r\n  const stopSendingTimeToSocket = () => {\r\n    if (admin) {\r\n      setIsPlaying(false);\r\n      socket.emit(\"isPlaying\", { isPlaying: false });\r\n    }\r\n  };\r\n\r\n  socket.on(\"isPlayingSocketAnswer\", (isPlaying) => {\r\n    setIsPlaying(isPlaying);\r\n  });\r\n\r\n  socket.on(\"currentSeconds\", ({ time }) => {\r\n    if (player.current) {\r\n      player.current.seekTo(time, \"seconds\");\r\n    }\r\n  });\r\n\r\n  const deleteVidoeFromQueue = () => {\r\n    setVideoQueue((prev) =>\r\n      prev.filter((array) => !array.includes(currentVideoLink))\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"videoAndChat\">\r\n      <div className=\"playerAndChat\">\r\n        <div className=\"player-wrapper\">\r\n          <ReactPlayer\r\n            ref={player}\r\n            onPlay={startSendingTimeToSocket}\r\n            onPause={stopSendingTimeToSocket}\r\n            onEnded={deleteVidoeFromQueue}\r\n            playing={isPlaying}\r\n            className=\"react-player\"\r\n            url={currentVideoLink}\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            controls={true}\r\n            volume={0.1}\r\n          />\r\n        </div>\r\n        <div className=\"twitchChat\">\r\n          <span className=\"onlineUsers\">\r\n            {onlineUsers ? `${onlineUsers} ONLINE` : \"CONNECTING\"}\r\n          </span>\r\n          <iframe\r\n            style={{ border: \"2px solid #121212\" }}\r\n            title=\"TwitchChat\"\r\n            id=\"chat_embed\"\r\n            src={`https://www.twitch.tv/embed/${streamer}/chat?darkpopout&parent=${websiteURL}`}\r\n            height=\"100%\"\r\n            width=\"350\"\r\n          ></iframe>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayerAndChat;\r\n","import React, { useState } from \"react\";\nimport { Switch, Route, useHistory } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport \"./App.css\";\nimport AdminPanel from \"./comp/AdminPanel\";\nimport AdminLogin from \"./comp/AdminLogin\";\nimport PlayerAndChat from \"./comp/PlayerAndChat\";\nimport { useEffect } from \"react\";\n\nexport const DataContext = React.createContext();\n\n// const socket = io(`http://localhost:3001/`);\nconst serverURL = \"https://boiling-bastion-80662.herokuapp.com/\";\nconst socket = io(serverURL);\nconst App = () => {\n  const history = useHistory();\n  const [admin, setAdmin] = useState(false);\n  const [currentVideoLink, setCurrentVideoLink] = useState(\"\");\n  const [videoQueue, setVideoQueue] = useState([]);\n  const [onlineUsers, setOnlineUsers] = useState(null);\n\n  useEffect(() => {}, []);\n\n  socket.on(\"onlineUsers\", (onlineUsers) => {\n    setOnlineUsers(onlineUsers);\n  });\n  return (\n    <>\n      <DataContext.Provider\n        value={{\n          admin,\n          setAdmin,\n          socket,\n          currentVideoLink,\n          setCurrentVideoLink,\n          videoQueue,\n          setVideoQueue,\n          history,\n          onlineUsers,\n        }}\n      >\n        <div className=\"app\">\n          <Switch>\n            <Route path=\"/\" exact>\n              <PlayerAndChat />\n              {admin && (\n                <div className=\"bottomDiv\">\n                  <AdminPanel />\n                </div>\n              )}\n            </Route>\n            <Route path=\"/admin\">\n              <AdminLogin />\n            </Route>\n          </Switch>\n        </div>\n      </DataContext.Provider>\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { HashRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}