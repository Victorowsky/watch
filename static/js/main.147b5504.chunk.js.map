{"version":3,"sources":["comp/AdminPanel.js","comp/PlayerAndChat.js","App.js","index.js"],"names":["AdminPanel","useContext","DataContext","admin","setAdmin","setCurrentVideoLink","useState","editVideoLink","setEditVideoLink","onClick","prev","style","backgroundColor","type","value","onChange","e","target","display","preventDefault","PlayerAndChat","currentVideoLink","socket","isPlaying","setIsPlaying","player","useRef","useEffect","setInterval","emit","current","getCurrentTime","on","currentVideoLinkServer","isPlayingServer","seconds","currentTime","seekTo","time","className","ref","onPlay","onPause","playing","url","width","height","controls","volume","border","title","id","src","React","createContext","App","history","useHistory","io","setAdminPermissions","push","Provider","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.147b5504.chunk.js","sourcesContent":["import React, { useContext } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { DataContext } from \"../App\";\r\nconst AdminPanel = () => {\r\n  const { admin, setAdmin, setCurrentVideoLink } = useContext(DataContext);\r\n  const [editVideoLink, setEditVideoLink] = useState();\r\n  const [videoQueue, setVideoQueue] = useState();\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={() => setAdmin((prev) => !prev)}\r\n        style={admin ? { backgroundColor: \"#06d6a0\" } : {}}\r\n      >\r\n        ADMIN\r\n      </button>\r\n      {admin && (\r\n        // ADDING VIDEO PANEL\r\n        <form>\r\n          <input\r\n            type=\"text\"\r\n            value={editVideoLink}\r\n            onChange={(e) => {\r\n              if (admin) {\r\n                setEditVideoLink(e.target.value);\r\n              }\r\n            }}\r\n          />\r\n          <button\r\n            style={{ display: \"none\" }}\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              setCurrentVideoLink(editVideoLink);\r\n              setEditVideoLink(\"\");\r\n            }}\r\n            type=\"submit\"\r\n          ></button>\r\n        </form>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n","import React, { useContext } from \"react\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport ReactPlayer from \"react-player/lazy\";\r\nimport { DataContext } from \"../App\";\r\n\r\nconst PlayerAndChat = () => {\r\n  const { admin, setCurrentVideoLink, currentVideoLink, socket } = useContext(\r\n    DataContext\r\n  );\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const player = useRef();\r\n  const maxDelay = 2;\r\n  const websiteURL = \"https://victorowsky.github.io/\"; // FOR TWITCH CHAT\r\n\r\n  useEffect(() => {\r\n    if (admin) {\r\n      setInterval(() => {\r\n        socket.emit(\"currentSeconds\", player.current.getCurrentTime());\r\n      }, 3000);\r\n    }\r\n  }, [admin, socket]);\r\n\r\n  useEffect(() => {\r\n    if (admin) {\r\n      socket.emit(\"videoChange\", currentVideoLink);\r\n    }\r\n  }, [currentVideoLink, socket, admin]);\r\n\r\n  useEffect(() => {\r\n    if (!currentVideoLink) {\r\n      socket.emit(\"getAllData\");\r\n    }\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  socket.on(\r\n    \"getAllDataAnswer\",\r\n    ({ currentVideoLinkServer, isPlayingServer }) => {\r\n      setCurrentVideoLink(currentVideoLinkServer);\r\n      setIsPlaying(isPlayingServer);\r\n    }\r\n  );\r\n\r\n  socket.on(\"currentSecondsAnswer\", (seconds) => {\r\n    if (player.current) {\r\n      const currentTime = player.current.getCurrentTime();\r\n      if (\r\n        !(currentTime < seconds + maxDelay && currentTime > seconds - maxDelay)\r\n      ) {\r\n        player.current.seekTo(seconds, \"seconds\");\r\n      }\r\n    }\r\n  });\r\n\r\n  socket.on(\"videoChangeAnswer\", (currentVideoLink) => {\r\n    if (!admin) {\r\n      setCurrentVideoLink(currentVideoLink);\r\n    }\r\n  });\r\n\r\n  const startSendingTimeToSocket = () => {\r\n    if (admin) {\r\n      setIsPlaying(true);\r\n      socket.emit(\"isPlaying\", { isPlaying: true });\r\n    }\r\n  };\r\n\r\n  const stopSendingTimeToSocket = () => {\r\n    if (admin) {\r\n      setIsPlaying(false);\r\n      socket.emit(\"isPlaying\", { isPlaying: false });\r\n    }\r\n  };\r\n\r\n  socket.on(\"isPlayingSocketAnswer\", (isPlaying) => {\r\n    setIsPlaying(isPlaying);\r\n  });\r\n\r\n  socket.on(\"currentSeconds\", ({ time }) => {\r\n    if (player.current) {\r\n      player.current.seekTo(time, \"seconds\");\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className=\"videoAndChat\">\r\n      <div className=\"playerAndChat\">\r\n        <div className=\"player-wrapper\">\r\n          <ReactPlayer\r\n            ref={player}\r\n            onPlay={startSendingTimeToSocket}\r\n            onPause={stopSendingTimeToSocket}\r\n            playing={isPlaying}\r\n            className=\"react-player\"\r\n            url={currentVideoLink}\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            controls={true}\r\n            volume={0.1}\r\n          />\r\n        </div>\r\n        <div className=\"twitchChat\">\r\n          <iframe\r\n            style={{ border: \"2px solid #121212\" }}\r\n            title=\"TwitchChat\"\r\n            id=\"chat_embed\"\r\n            src={`https://www.twitch.tv/embed/demonzz1/chat?parent=${websiteURL}&darkpopout`}\r\n            height=\"100%\"\r\n            width=\"350\"\r\n          ></iframe>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayerAndChat;\r\n","import React, { useState } from \"react\";\nimport { Switch, Route, useHistory } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport \"./App.css\";\nimport AdminPanel from \"./comp/AdminPanel\";\nimport PlayerAndChat from \"./comp/PlayerAndChat\";\n\nexport const DataContext = React.createContext();\n\nconst App = () => {\n  const history = useHistory();\n  const [admin, setAdmin] = useState(false);\n  const [currentVideoLink, setCurrentVideoLink] = useState(\"\");\n\n  const serverURL = \"https://boiling-bastion-80662.herokuapp.com/\";\n  // const socket = io(`http://localhost:3001/`);\n  const socket = io(serverURL);\n\n  const setAdminPermissions = () => {\n    if (!admin) {\n      setAdmin(true);\n    }\n    history.push(\"/\");\n  };\n\n  return (\n    <>\n      <DataContext.Provider\n        value={{\n          admin,\n          setAdmin,\n          currentVideoLink,\n          setCurrentVideoLink,\n          socket,\n        }}\n      >\n        <div className=\"app\">\n          <Switch>\n            <Route path=\"/\" exact>\n              <PlayerAndChat />\n              {admin && (\n                <div className=\"bottomDiv\">\n                  <AdminPanel />\n                </div>\n              )}\n            </Route>\n            <Route path=\"/admin\">{setAdminPermissions}</Route>\n          </Switch>\n        </div>\n      </DataContext.Provider>\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { HashRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}