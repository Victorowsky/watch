(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{130:function(e,t,n){},134:function(e,t,n){},140:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),o=n.n(c),i=(n(99),n(11)),s=n(5),l=n(82),u=n.n(l),m=(n(130),n(174)),d=n(176),f=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),borderColor:"white",color:"white",transition:"0.3s","&:hover":{color:"red",borderColor:"red"}}}}}));function v(e){var t=e.text,n=e.onClick,a=e.style,c=f();return r.a.createElement("div",{className:c.root},r.a.createElement(d.a,{onClick:n&&n,style:a&&a,variant:"outlined"},t||"Enter text"))}n(134);var E=function(){var e=Object(a.useContext)(D),t=e.admin,n=e.setAdmin,c=e.setCurrentVideoLink,o=e.socket,s=Object(a.useState)(),l=Object(i.a)(s,2),u=l[0],m=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),t&&r.a.createElement("form",null,r.a.createElement("input",{type:"text",value:u,placeholder:"VIDEO URL",onChange:function(e){t&&m(e.target.value)}}),r.a.createElement("button",{style:{display:"none"},onClick:function(e){e.preventDefault(),c(u),m("")},type:"submit"})),r.a.createElement("div",{className:"adminButtonsDiv"},r.a.createElement(v,{text:"LEAVE ADMIN",onClick:function(){window.confirm("Are you sure you don't want to be an admin?")&&(n(!1),o.emit("adminLeave"))}})))},b=n(83),p=n.n(b),O=(n(140),n(85)),g=n.n(O),h=n(84),j=n.n(h),w=function(){var e=Object(s.g)(),t=Object(s.h)().twitchStreamer;void 0===t&&(t="victorowsky_");var n=Object(a.useState)(null),c=Object(i.a)(n,2),o=c[0],l=c[1],u=Object(a.useState)(t),m=Object(i.a)(u,2),d=m[0],f=m[1],E=Object(a.useContext)(D),b=E.admin,O=E.setCurrentVideoLink,h=E.currentVideoLink,w=E.socket,y=E.setAdmin,C=E.setIsSuccess,k=E.setIsError,A=E.setErrorMessage,S=E.setSuccessMessage,N=Object(a.useState)(!1),L=Object(i.a)(N,2),R=L[0],I=L[1],x=Object(a.useRef)(),M=Object(a.useState)(2),T=Object(i.a)(M,2),P=T[0],V=T[1],U=Object(a.useState)(!0),F=Object(i.a)(U,2),q=F[0],B=F[1];Object(a.useEffect)((function(){var e;return b&&(e=setInterval((function(){w.emit("adminData",{currentRoom:d,currentSeconds:x.current.getCurrentTime()})}),3e3)),function(){clearInterval(e)}}),[b,w,d]),Object(a.useEffect)((function(){b&&w.emit("videoChange",{currentVideoLink:h,currentRoom:d})}),[h,w]),Object(a.useEffect)((function(){window.addEventListener("beforeunload",(function(e){e.preventDefault(),w.emit("leaveRoom",{currentRoom:d}),w.emit("adminLeave")})),f(t)}),[e.pathname]),Object(a.useEffect)((function(){return w.emit("joinRoom",{currentRoom:d}),function(){w.emit("leaveRoom",{currentRoom:d}),y(!1),w.emit("adminLeave")}}),[d]),Object(a.useEffect)((function(){if(w.on("onlineUsersAnswer",(function(e){var t=e.onlineUsers;l(t)})),!b)return w.on("videoChangeAnswer",(function(e){var t=e.currentVideoLink;O(t)})),w.on("isPlayingSocketAnswer",(function(e){var t=e.isPlaying;e.currentRoom;I(t)})),w.on("joinRoomAnswer",(function(e){var t=e.docs;O(t.currentVideoLink),l(t.onlineUsers),console.log(t.admin),t.admin?B(!0):B(!1)})),w.on("adminAnswer",(function(e){var t=e.isAdminTaken;B(t)})),w.on("adminDataAnswer",(function(e){var t=e.currentSeconds;if(x.current){var n=x.current.getDuration(),a=x.current.getCurrentTime();n>t?a-P<t&&a+P>t||x.current.seekTo(t,"seconds"):a<n+6&&a>n-6||x.current.seekTo(n,"seconds")}})),function(){w.removeAllListeners("adminDataAnswer"),w.removeAllListeners("joinRoomAnswer"),w.removeAllListeners("isPlayingSocketAnswer"),w.removeAllListeners("videoChangeAnswer"),w.removeAllListeners("adminAnswer")}}),[d,b,w,P]);w.on("adminRequestAnswer",(function(e){var t=e.success,n=e.message;t?(C(!0),S(n),y(!0)):(k(!0),A(n))}));var G=function(e){"increment"===e?V((function(e){return e+1})):"decrement"===e&&V((function(e){return e>2?e+-1:e}))};return r.a.createElement("div",{className:"videoAndChat"},r.a.createElement("div",{className:"playerAndChat"},r.a.createElement("div",{className:"player-wrapper"},r.a.createElement(p.a,{ref:x,onPlay:function(){b&&(I(!0),w.emit("isPlaying",{isPlaying:!0,currentRoom:d}))},onPause:function(){b&&(I(!1),w.emit("isPlaying",{isPlaying:!1,currentRoom:d}))},playing:R,className:"react-player",url:h,width:"100%",height:"100%",controls:!0,volume:.1})),r.a.createElement("div",{className:"twitchChat"},r.a.createElement("span",{className:"onlineUsers"},null!==o?"".concat(o," ONLINE"):"CONNECTING"),r.a.createElement("iframe",{style:{border:"2px solid #121212"},title:"TwitchChat",id:"chat_embed",src:"https://www.twitch.tv/embed/".concat(t,"/chat?darkpopout&parent=").concat("victorowsky.github.io"),height:"100%",width:"100%"}),!b&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"delayInfo"},"Max Delay: ",P," seconds"),r.a.createElement("div",{className:"delayManage"},r.a.createElement("div",{className:"delayManageOptionDecrement",onClick:function(){return G("decrement")}},r.a.createElement(j.a,null)),r.a.createElement("div",{className:"delayManageOptionIncrement",onClick:function(){return G("increment")}},r.a.createElement(g.a,null))),!q&&r.a.createElement(v,{text:"GET ADMIN",onClick:function(){w.emit("adminRequest",{currentRoom:t})},style:{borderColor:"white",color:"white"}})))))},y=n(178),C=n(179);function k(e){return r.a.createElement(C.a,Object.assign({elevation:6,variant:"filled"},e))}var A=Object(m.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function S(){var e=Object(a.useContext)(D),t=e.isSuccess,n=e.setIsSuccess,c=e.successMessage,o=A(),i=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement("div",{className:o.root},r.a.createElement(y.a,{open:t,autoHideDuration:1e3,onClose:i},r.a.createElement(k,{onClose:i,severity:"success"},c)))}function N(e){return r.a.createElement(C.a,Object.assign({elevation:6,variant:"filled"},e))}var L=Object(m.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function R(){var e=Object(a.useContext)(D),t=e.isError,n=e.setIsError,c=e.errorMessage,o=L(),i=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement("div",{className:o.root},r.a.createElement(y.a,{open:t,autoHideDuration:1e3,onClose:i},r.a.createElement(N,{onClose:i,severity:"error"},c)))}var D=r.a.createContext(),I=u()("https://boiling-bastion-80662.herokuapp.com/"),x=function(){var e=Object(s.f)(),t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(""),u=Object(i.a)(l,2),m=u[0],d=u[1],f=Object(a.useState)(!1),v=Object(i.a)(f,2),b=v[0],p=v[1],O=Object(a.useState)(!1),g=Object(i.a)(O,2),h=g[0],j=g[1],y=Object(a.useState)(""),C=Object(i.a)(y,2),k=C[0],A=C[1],N=Object(a.useState)(""),L=Object(i.a)(N,2),x=L[0],M=L[1];return Object(a.useEffect)((function(){fetch("https://noembed.com/embed?url=".concat(m)).then((function(e){return e.json()})).then((function(e){document.title=e.title,void 0===e.title&&(document.title="Watch Together")}))}),[m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(D.Provider,{value:{admin:c,setAdmin:o,socket:I,currentVideoLink:m,setCurrentVideoLink:d,history:e,isSuccess:b,setIsSuccess:p,isError:h,setIsError:j,successMessage:k,setSuccessMessage:A,errorMessage:x,setErrorMessage:M}},r.a.createElement("div",{className:"app"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0},r.a.createElement(w,null),r.a.createElement("div",{className:"bottomDiv"},c&&r.a.createElement(E,null))),r.a.createElement(s.a,{path:"/:twitchStreamer",exact:!0},r.a.createElement(w,null),r.a.createElement("div",{className:"bottomDiv"},c&&r.a.createElement(E,null)))),r.a.createElement(S,null),r.a.createElement(R,null))))},M=n(43);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M.a,null,r.a.createElement(x,null))),document.getElementById("root"))},94:function(e,t,n){e.exports=n(143)},99:function(e,t,n){}},[[94,13,14]]]);
//# sourceMappingURL=main.68cbbc0e.chunk.js.map